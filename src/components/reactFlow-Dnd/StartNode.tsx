import React, { useState } from 'react';
import { useDispatch } from 'react-redux';
import { Handle, Position } from 'reactflow';
import "../../index.css"
import { addHandle } from '../../redux/handle';
import { CirclePlus } from 'tabler-icons-react';
import { useDisclosure } from '@mantine/hooks';
import { Tooltip } from 'react-tooltip';
import ModalContainer from './ModalContainer';


const StartNode = ({...otherProps}) => {
  const dispatch = useDispatch()

  const [opened, { open, close }] = useDisclosure(false);
  const [returned, setReturned] = useState(false)

  return (
    <div className="flex justify-center items-center ring-2 ring-green-500 w-12 h-12 bg-white rounded-full text-green-700">
      <Handle type="source" position={Position.Bottom} id="default" onClick={(event) => {dispatch(addHandle(""))}}/>
      <Handle className='w-4 h-4 bg-transparent border-none cursor-pointer z-100' type="source" position={Position.Bottom} id="default" 
          onClick={(event) => {
            console.log("Event from handle click", event)
            open()
            }}>
            <CirclePlus
                  size={18}
                  strokeWidth={2.5}
                  color={'#ffffff'}
                  className= "inline-block absolute fill-green-700 color-white z-0 mr-10"
                  data-tooltip-id="Start-tooltip"
                  data-tooltip-content="Add New Task"
                  onClick={() => dispatch(addHandle("default"))}
              />
              <Tooltip className="flex flex-row inline mt-4 w-max bg-slate-600 text-sm text-white p-1 rounded-md" id="Start-tooltip" />
            </Handle>
            <ModalContainer opened={opened} onClose={close} returned={returned} fromEdge={false} edgeId={""} otherProps={otherProps}/>
        <>Start</>
    </div>
  );
}

export default StartNode;