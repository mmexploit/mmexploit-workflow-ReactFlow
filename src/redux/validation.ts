import { createSlice } from "@reduxjs/toolkit";

export interface EventState {
    allowedNodes: string[], 
    isValid: boolean
}

const initialState: EventState = {
    allowedNodes: [],
    isValid: true
}

const validationSlice = createSlice({
    name: "validation",
    initialState,
    reducers: {
        setAllowedNodes: (state, action) => {
            console.log("setAllowedNodes called")
            state.allowedNodes = action.payload;
          },
        resetIsValid: (state, action) => {
            state.isValid = true
        },
        isValidConnection: (state, action) => {
            const connection = action.payload;
            const isValid = state.allowedNodes.includes(connection.target);
            state.isValid = isValid
        }
    }
})


export const { isValidConnection, resetIsValid, setAllowedNodes } = validationSlice.actions;

export default validationSlice.reducer